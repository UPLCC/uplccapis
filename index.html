<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>UPLCC-APIs</title>
    <style>
      *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;}
      :root{--blur:12px;--radius:10px;--speed:.35s;--gray0:#000;--gray1:#111;--gray2:#222;--gray3:#333;--gray6:#666;--gray9:#999;--grayC:#ccc;--grayF:#fff;}
      body{background:linear-gradient(135deg,#e0e0e0 0%,#f5f5f5 100%);min-height:100vh;color:var(--gray3);}
      #topd{position:fixed;z-index:100;top:0;left:0;width:100vw;height:56px;background:rgba(255,255,255,.25);backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));box-shadow:0 2px 8px rgba(0,0,0,.08);}
      #logo{position:absolute;height:36px;top:50%;left:12px;transform:translateY(-50%);transition:transform var(--speed);}
      #logo:hover{transform:translateY(-50%) scale(1.05);}
      #tips{position:absolute;top:50%;right:12px;transform:translateY(-50%);width:48px;height:32px;border:0;border-radius:var(--radius);background:rgba(0,0,0,.08);color:var(--gray3);cursor:pointer;transition:background var(--speed),color var(--speed);}
      #tips:hover{background:var(--gray3);color:var(--grayF);}
      .gotourl{color:var(--gray6);text-decoration:underline;cursor:pointer;transition:color var(--speed);}
      .gotourl:hover{color:var(--gray0);}
      #tipdiv{position:fixed;z-index:150;top:50%;left:50%;transform:translate(-50%,-50%) scale(.95);width:90vw;max-width:600px;max-height:70vh;overflow-y:auto;padding:20px;border-radius:var(--radius);background:rgba(255,255,255,.75);backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));box-shadow:0 8px 24px rgba(0,0,0,.12);opacity:0;pointer-events:none;transition:transform var(--speed),opacity var(--speed);}
      #tipdiv.show{transform:translate(-50%,-50%) scale(1);opacity:1;pointer-events:auto;}
      #tipok,#tipno{width:64px;height:36px;border:0;border-radius:var(--radius);cursor:pointer;font-size:14px;transition:background var(--speed),color var(--speed);}
      #tipok{background:var(--gray3);color:var(--grayF);margin-left:8px;}
      #tipok:hover{background:var(--gray0);}
      #tipno{background:rgba(0,0,0,.05);color:var(--gray3);}
      #tipno:hover{background:var(--grayC);}
      #cont{margin-top:64px;padding:12px;display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));}
      .apidiv{border-radius:var(--radius);background:rgba(255,255,255,.35);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);padding:16px;cursor:pointer;transition:transform var(--speed),box-shadow var(--speed);}
      .apidiv:hover{transform:translateY(-4px);box-shadow:0 6px 18px rgba(0,0,0,.1);}
      #ground{position:fixed;inset:0;z-index:140;background:rgba(0,0,0,.3);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);opacity:0;pointer-events:none;transition:opacity var(--speed);}
      #ground.show{opacity:1;pointer-events:auto;}
      #loading{position:fixed;inset:0;z-index:500;background:var(--grayF);display:flex;align-items:center;justify-content:center;transition:opacity .5s;pointer-events:none;}
      #loading.hide{opacity:0;}
      #edit{position:fixed;z-index:300;top:50%;left:50%;transform:translate(-50%,-50%) scale(.95);width:90vw;max-width:480px;max-height:80vh;overflow-y:auto;padding:20px;border-radius:var(--radius);background:rgba(255,255,255,.75);backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));box-shadow:0 8px 24px rgba(0,0,0,.15);opacity:0;pointer-events:none;transition:transform var(--speed),opacity var(--speed);}
      #edit.show{transform:translate(-50%,-50%) scale(1);opacity:1;pointer-events:auto;}
      #editfilter{position:fixed;inset:0;z-index:210;background:rgba(0,0,0,.25);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);opacity:0;pointer-events:none;transition:opacity var(--speed);}
      #editfilter.show{opacity:1;pointer-events:auto;}
      #editinput{width:70%;height:36px;padding:0 8px;border:1px solid var(--grayC);border-radius:var(--radius);background:rgba(255,255,255,.6);}
      #editbutton{width:24%;height:36px;border:0;border-radius:var(--radius);background:var(--gray3);color:var(--grayF);cursor:pointer;transition:background var(--speed);}
      #editbutton:hover{background:var(--gray0);}
      .editcode{margin-top:8px;padding:12px;border-radius:var(--radius);background:rgba(0,0,0,.05);overflow-x:auto;}
      h3{font-size:18px;margin-bottom:6px;font-weight:600;}
      h4{font-size:14px;margin:12px 0 4px;font-weight:500;color:var(--gray6);}
      pre{white-space:pre-wrap;word-break:break-all;font-size:13px;color:var(--gray3);}
      @media (max-width:600px){#cont{grid-template-columns:1fr;}}
      .table-card {width: 100%;margin: 0 auto;border-collapse: collapse;background: #fff;border: 1px solid #ddd;table-layout: fixed;}
      .table-card th:first-child,
      .table-card td:first-child {width: 25%;}
      .table-card th:last-child,
      .table-card td:last-child {width: 75%;}
      .table-card th,
      .table-card td {padding: 1rem 1.25rem;font-size: 0.95rem;text-align: left;border: 1px solid #ddd;word-break: break-word;}
      .table-card th {font-weight: 600;background: #fafafa;}
    </style>
  </head>
  <body>
    <div id="loading"><h3>等待资源加载完成...</h3></div>
	<div id="topd">
      <img src="logo.png" id="logo"/>
      <button onclick="ts()" id="tips">公告</button>
    </div>
    <div id="tipdiv">
      <h3 id="tiptitle"></h3>
      <p id="tipmsg"></p>
      <div style="text-align:right;margin-top:12px;">
        <button id="tipno" onclick="ontip({msg:'click'},300)">取消</button>
        <button id="tipok" onclick="ontip({msg:'click'},200)">确定</button>
      </div>
    </div>
    <div id="edit">
      <h3>在线调试</h3>
      <h4>请求URL</h4>
      <div style="display:flex;gap:8px;">
        <input type="text" placeholder="请求的链接" id="editinput"/>
        <button id="editbutton" onclick="sendReq()">请求</button>
      </div>
      <h4>返回结果</h4>
      <div id="editcode" class="editcode"><pre id="edittext">等待进行请求...</pre></div>
    </div>
    <div id="editfilter" onclick="offedit()"></div>
    <div id="ground"></div>
    <div id="cont"></div>
  </body>
  <script src="apis.js"></script>
  <script>
    const img=document.getElementById('logo');
    const cover=document.getElementById('loading');
    function hideLoading(){
      cover.classList.add('hide');
      setTimeout(()=>cover.remove(),500);
    }
    img.complete?hideLoading():img.addEventListener('load',hideLoading);
    const tiptext=tipstext;
    function changestr(str){
      return str
        .replace(/&/g,"&amp;")
        .replace(/<url>([\S\s]+?)<\/url>/g,`<span class="gotourl" onclick="window.open('$1','_blank')">$1</span>`)
        .replace(/<res>([\s\S]+?)<\/res>/g,`<td>$1</td><td>`)
        .replace(/<resurl>([\s\S]+?)<\/resurl>/g,`<pre class="gotourl" onclick="editonline(this.innerText)">$1</pre>`);
    }
    function ts(){
      const res=changestr(tiptext);
      ontip({title:"公告",msg:res},0);
    }
    function ontip(arr,num){
      const tipdiv=document.getElementById("tipdiv");
      const tiptitle=document.getElementById("tiptitle");
      const tipmsg=document.getElementById("tipmsg");
      const ground=document.getElementById("ground");
      const tipok=document.getElementById("tipok");
      const tipno=document.getElementById("tipno");
      if(arr.msg==="click"&&num>=200){
        tipdiv.classList.remove('show');
        ground.classList.remove('show');
        return;
      }
      if(!num)num=0;
      tipok.innerText="确定";
      tipno.style.display="inline-block";
      if(num===1)tipno.style.display="none";
      if(num===2&&arr.txt){
        tipok.innerText=arr.txt;
        tipno.style.display="none";
      }
      tiptitle.innerText=arr.title||"提示";
      tipmsg.innerHTML=changestr(arr.msg);
      tipdiv.classList.add('show');
      ground.classList.add('show');
    }
    const cont=document.getElementById('cont');
    apilist.forEach(data=>{
      let result='<br>';
      result+=`<h4>请求链接</h4><resurl>${data.url}</resurl><br><br>`;
      result+=`<h4>示例链接</h4><resurl>${data.eg}</resurl><br><br><h4>参数</h4><table class="table-card"><thead><tr><th>参数名</th><th>备注</th></tr></thead><tbody>`;
      data.res.forEach(r=>result+="<tr>"+r+'</td></tr>');
      result+=`</tbody></table><br><h4>返回示例</h4><div class="editcode"><pre>${data.ret}</pre></div>`;
      const div=document.createElement('div');
      div.className='apidiv';
      div.innerHTML=`<h3>${data.name}</h3><p style="color:var(--gray6);font-size:14px;">${data.alt}</p>`;
      div.dataset.detail=result;
      div.addEventListener('click',()=>ontip({title:'API详情',msg:div.dataset.detail,txt:'关闭'},2));
      cont.appendChild(div);
    });
    function editonline(url){
      if(!url)return;
      url=url.trim();
      document.getElementById("editinput").value=url;
      document.getElementById("edit").classList.add('show');
      document.getElementById("editfilter").classList.add('show');
    }
    function offedit(){
      document.getElementById("edit").classList.remove('show');
      document.getElementById("editfilter").classList.remove('show');
    }
    function sendReq(){
      const u=document.getElementById('editinput').value;
      const pre=document.getElementById('edittext');
      if(!u||!u.startsWith('http'))return;
      pre.textContent='正在请求...';
      fetch(u).then(r=>r.text()).then(d=>pre.textContent=d).catch(e=>pre.textContent=e);
    }
  </script>
</html>